<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Medical Stock Indicator System Data</title>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
   <style type="text/css">
        body
        {
            font-family: Arial;
            font-size: 10pt;
        }
        table
        {
            border: 1px solid #ccc;
            border-collapse: collapse;
            width: 100%
        }
        table th
        {
            background-color: #F7F7F7;
            color: #333;
            font-weight: bold;
        }
        table th, table td
        {
            padding: 5px;
            border-color: #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
    <div class="row"><div class="col-md-2">       <a href="stockdata.html" title="IIT Mandi Home"><img src="finallogo.png" class="img-responsive" alt="logo" ></a>
</div>
      <div class="col-md-10"><br>
        <h1>Medical Stock Data</h1>
        <p class="loading">Loading...</p>
        <p class="done-loading" style="display: none;">Health Center wise stock status is shown below:</p>
            </div>
    <div class="row">
      <div class="col-md-12">

<table>
    <tr>
        <th>Health Center Name</th>
        <th>Stock Availability</th>
        <th>Required stock type</th>
        <th>Stock Request time</th>
                <th>Quantity</th>
                
    </tr>
</table>    </div>
    </div>
  </div>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript">
    var hcMapping = {"kam":"Kamand", "nav":"Navlay", "bal":"Balmand", "tri":"Triyambli", "tih":"Tihri", "tan":"Tandu", "riy":"Riyagarhi"};
    var indicatorMapping = {"0":"Stock Required", "1":"Stock OK"};
    var medMapping = {"p" : "paracetamol", 
"c" : "cetirizine", 
"a" : "acetaminophen", 
"z" : "zincSulphate", 
"ca" : "Calcium"}
  var public_key = 'ZGoYlZXwRoCqpMNGON70';
var TIMESTAMP_KEY = 'timestamp';
 $.ajax({
   url: 'http://data.sparkfun.com/output/' + public_key + '.json',
   jsonp: 'callback',
   cache: true,
   dataType: 'jsonp',
   data: {
     page: 1
   },
   success: function(response) {
        $('.loading').hide();
    $('.done-loading').show();
     // response will be a javascript
     // array of objects
     console.log(response);
      var tr;
      var d;
        for (var i = 0; i < response.length; i++) {
          d = new Date(response[i].ts);
            tr = $('<tr/>');
            tr.append("<td>" + hcMapping[response[i].hc] + "</td>");
            tr.append("<td>" + indicatorMapping[response[i].i] + "</td>");
            tr.append("<td>" + medMapping[response[i].stock] + "</td>");
             tr.append("<td>" + d.toDateString() + "</td>");
            $('table').append(tr);
        }

        
   }
 });
      


    </script>
</body>
</html>
